<!-- src/pages/case-studies/storyengines/CMS.vue -->
<script setup lang="ts">
import { useHead } from '@vueuse/head'
import CaseStudyFrame from '@/components/case/CaseStudyFrame.vue'
import CS_TextSection from '@/components/case/CS_TextSection.vue'
import CS_Media       from '@/components/case/CS_Media.vue'
import CS_Subnav      from '@/components/case/CS_Subnav.vue'
import CSProblem      from '@/components/blocks/CSProblem.vue'
import CSResults      from '@/components/blocks/CSResults.vue'
import ProcessSteps   from '@/components/blocks/CSProcessSteps.vue'

const canonicalUrl = 'https://www.guillaumelaine.com/case-studies/storyengines/cms'

useHead({
  title: 'StoryEngines ‚Äî CMS (Decap) & Workflow',
  meta: [
    { name: 'description', content: 'Decap CMS + Netlify Identity : √©dition Markdown, assets g√©r√©s, previews et CI/CD.' },
    { property: 'og:title', content: 'StoryEngines ‚Äî CMS (Decap) & Workflow' },
    { property: 'og:image', content: '/og/case-studies/storyengines-cms.jpg' },
  ],
  link: [{ rel: 'canonical', href: canonicalUrl }]
})

const problem = {
  title: 'Probl√®me / Enjeu',
  body_fr: "Donner au client une √©dition simple (Markdown + assets), des previews fiables, et un pipeline Netlify sans friction.",
}

const results = {
  title: 'R√©sultats',
  highlights: [
    { icon:'üìù', text:'√âdition Markdown avec front-matter (productions, pages)' },
    { icon:'üîê', text:'Netlify Identity : auth simple, preview prot√©g√©e' },
    { icon:'‚öôÔ∏è', text:'CI/CD Netlify : builds rapides, rollback facile' },
    { icon:'üóÇÔ∏è', text:'Arborescence claire des m√©dias ; noms de fichiers normalis√©s' }
  ]
}

const steps = [
  { src:'/cs/storyengines/cms/collections.avif', title:'Collections', desc:'Schemas Decap, champs front-matter.' },
  { src:'/cs/storyengines/cms/preview.avif',     title:'Preview', desc:'Preview gated via Identity, QA rapide.' },
  { src:'/cs/storyengines/cms/deploy.avif',      title:'CI/CD', desc:'Build & d√©ploiement Netlify automatis√©s.' }
]
</script>

<template>
  <CaseStudyFrame title="CMS (Decap) & Workflow" description="Markdown, previews, CI/CD Netlify">
    <CS_Subnav />

    <CSProblem :block="problem" />

    <CS_Media src="/cs/storyengines/cms/hero.avif" caption="Decap CMS ‚Äî collections, preview, pipeline CI/CD" />

    <ProcessSteps
      title="Processus"
      :steps="steps"
      variant="cards"
      direction="auto"
      connector="arrow"
      mediaAspect="16:9"
    />

    <CS_TextSection title="S√©curit√© & qualit√©">
      <ul class="list-disc pl-5 text-sm space-y-1">
        <li>Previews restreintes (Identity), validation avant merge</li>
        <li>Formats d‚Äôimages AVIF/WebP servis en priorit√©</li>
        <li>R√®gles de naming + assets folders ‚Üí z√©ro chaos</li>
      </ul>
    </CS_TextSection>

    <CSResults :block="results" />
  </CaseStudyFrame>
</template>
